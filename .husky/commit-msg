#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Commit message format validation
commit_regex='^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\(.+\))?: .{1,100}$'
commit_msg=$(cat "$1")

if ! echo "$commit_msg" | grep -qE "$commit_regex"; then
    echo "‚ùå Invalid commit message format!"
    echo ""
    echo "üìù Commit message must follow conventional commits:"
    echo "   type(scope?): subject"
    echo ""
    echo "üìã Valid types:"
    echo "   feat     - New feature"
    echo "   fix      - Bug fix"
    echo "   docs     - Documentation only"
    echo "   style    - Code style changes"
    echo "   refactor - Code refactoring"
    echo "   test     - Adding tests"
    echo "   chore    - Maintenance tasks"
    echo "   perf     - Performance improvements"
    echo "   ci       - CI/CD changes"
    echo "   build    - Build system changes"
    echo "   revert   - Revert previous commit"
    echo ""
    echo "Example: feat(auth): add login functionality"
    echo ""
    exit 1
fi

echo "‚úÖ Commit message format valid"